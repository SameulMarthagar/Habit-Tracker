<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hodded Habits</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* ===== EXISTING THEME ===== */
:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#0f172a;
  --accent:#2563eb;
}
body.dark{
  --bg:#0f172a;
  --card:#020617;
  --text:#e5e7eb;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui;
  background:var(--bg);
  color:var(--text);
}

/* ===== EXISTING LAYOUT (UNCHANGED) ===== */
header{height:60px;background:var(--card);display:flex;align-items:center;padding:0 16px;box-shadow:0 2px 8px rgba(0,0,0,.15)}
header h1{margin-left:auto;font-size:18px}
main{padding:24px;display:flex;justify-content:center}
#app{width:100%;max-width:1100px}
.grid{display:grid;gap:20px}
.years{grid-template-columns:repeat(3,1fr)}
.months{grid-template-columns:repeat(4,1fr)}
.days{grid-template-columns:repeat(7,1fr)}
.card{border-radius:18px;padding:28px;text-align:center;box-shadow:0 6px 16px rgba(0,0,0,.12);cursor:pointer;font-size:20px;font-weight:600;color:white}
.day{border-radius:12px;padding:18px 0;text-align:center;font-size:18px;cursor:pointer;color:#000}

/* ===== NEW: RIGHT CLICK MENU ===== */
#contextMenu{
  position:absolute;
  background:var(--card);
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.25);
  display:none;
  z-index:9000;
  overflow:hidden;
}
.context-item{
  padding:12px 16px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
}
.context-item:hover{
  background:var(--accent);
  color:white;
}

/* ===== REMINDER MODAL ===== */
#reminderModal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9500;
}
.modal-box{
  background:var(--card);
  padding:24px;
  border-radius:16px;
  width:90%;
  max-width:400px;
}
.modal-box input{
  width:100%;
  padding:10px;
  margin-top:10px;
}
.modal-box button{
  margin-top:16px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  background:var(--accent);
  color:white;
}

/* ===== DIARY PANEL ===== */
#diaryPanel{
  position:fixed;
  top:0;
  right:-420px;
  width:420px;
  height:100%;
  background:var(--card);
  padding:20px;
  transition:.3s;
  z-index:9200;
}
#diaryPanel.open{right:0}
#diaryPanel textarea{
  width:100%;
  height:70%;
  margin-top:12px;
  padding:12px;
  resize:none;
}
</style>
</head>

<body>

<header>
  <h1 id="title">Hodded Habits</h1>
</header>

<main>
  <div id="app"></div>
</main>

<!-- RIGHT CLICK MENU -->
<div id="contextMenu">
  <div class="context-item" onclick="openReminder()">ðŸ”” Add Reminder</div>
  <div class="context-item" onclick="openDiary()">ðŸ“” Diary Entry</div>
</div>

<!-- REMINDER MODAL -->
<div id="reminderModal">
  <div class="modal-box">
    <h3>Add Reminder ðŸ””</h3>
    <input id="reminderText" placeholder="Reminder title">
    <button onclick="saveReminder()">Save Reminder</button>
  </div>
</div>

<!-- DIARY PANEL -->
<div id="diaryPanel">
  <h3>Diary Entry ðŸ“”</h3>
  <textarea id="diaryText" placeholder="Write your thoughts..."></textarea>
  <button onclick="saveDiary()">Save Entry</button>
</div>

<script>
/* ===== STATE ===== */
let state = JSON.parse(localStorage.getItem("hh")) || { diary:{}, reminders:{} };
let selectedDateKey = null;

/* ===== RANDOM COLORS ===== */
const rand=()=>["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#14b8a6"][Math.floor(Math.random()*7)];
const light=()=>["#fde68a","#bbf7d0","#bfdbfe","#ddd6fe","#fbcfe8","#99f6e4"][Math.floor(Math.random()*6)];

/* ===== CALENDAR (UNCHANGED STRUCTURE) ===== */
const app=document.getElementById("app");
const years=[2026,2027,2028];
const months=["January","February","March","April","May","June","July","August","September","October","November","December"];
let current={};

function showYears(){
  app.innerHTML=`<div class="grid years">${years.map(y=>`
    <div class="card" style="background:${rand()}" onclick="showMonths(${y})">${y}</div>
  `).join("")}</div>`;
}
function showMonths(y){
  current.year=y;
  app.innerHTML=`<div class="grid months">${months.map((m,i)=>`
    <div class="card" style="background:${rand()}" onclick="showDays(${i})">${m}</div>
  `).join("")}</div>`;
}
function showDays(m){
  current.month=m;
  const days=new Date(current.year,m+1,0).getDate();
  app.innerHTML=`<div class="grid days">${Array.from({length:days},(_,d)=>`
    <div class="day"
      style="background:${light()}"
      oncontextmenu="openContextMenu(event,'${current.year}-${m}-${d+1}')">
      ${d+1}
    </div>
  `).join("")}</div>`;
}

/* ===== CONTEXT MENU ===== */
function openContextMenu(e,key){
  e.preventDefault();
  selectedDateKey = key;
  contextMenu.style.display="block";
  contextMenu.style.left=e.pageX+"px";
  contextMenu.style.top=e.pageY+"px";
}
document.addEventListener("click",()=>contextMenu.style.display="none");

/* ===== REMINDER ===== */
function openReminder(){
  reminderModal.style.display="flex";
}
function saveReminder(){
  state.reminders[selectedDateKey]=reminderText.value;
  reminderText.value="";
  reminderModal.style.display="none";
  localStorage.setItem("hh",JSON.stringify(state));
}

/* ===== DIARY ===== */
function openDiary(){
  diaryPanel.classList.add("open");
  diaryText.value=state.diary[selectedDateKey]||"";
}
function saveDiary(){
  state.diary[selectedDateKey]=diaryText.value;
  localStorage.setItem("hh",JSON.stringify(state));
  diaryPanel.classList.remove("open");
}

/* START */
showYears();
</script>

</body>
</html>
