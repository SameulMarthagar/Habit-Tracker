<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hodded Habits</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#0f172a;
  --accent:#2563eb;
}
body.dark{
  --bg:#0f172a;
  --card:#020617;
  --text:#e5e7eb;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui;
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}

/* HEADER */
header{
  height:60px;
  background:var(--card);
  display:flex;
  align-items:center;
  padding:0 16px;
  box-shadow:0 2px 8px rgba(0,0,0,.15);
}
.menu{font-size:22px;cursor:pointer;margin-right:12px}
header h1{margin-left:auto;font-size:18px}

/* MAIN */
main{padding:24px;display:flex;justify-content:center}
#app{width:100%;max-width:1100px}

/* GRIDS */
.grid{display:grid;gap:20px}
.years{grid-template-columns:repeat(3,1fr)}
.months{grid-template-columns:repeat(4,1fr)}
.days{grid-template-columns:repeat(7,1fr)}

.card{
  border-radius:18px;padding:28px;text-align:center;
  box-shadow:0 6px 16px rgba(0,0,0,.12);
  cursor:pointer;font-size:20px;font-weight:600;color:white
}
.day{
  border-radius:12px;padding:18px 0;
  text-align:center;font-size:18px;
  cursor:pointer;color:#000
}

/* CONTEXT MENU */
#contextMenu{
  position:absolute;
  background:var(--card);
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.3);
  display:none;
  z-index:9999;
}
.context-item{
  padding:12px 16px;
  cursor:pointer;
}
.context-item:hover{
  background:var(--accent);
  color:white;
}

/* REMINDER MODAL */
#reminderModal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10000;
}
.modal{
  background:var(--card);
  padding:24px;
  border-radius:18px;
  width:90%;
  max-width:420px;
}

/* DIARY PANEL (LEFT) */
#diaryPanel{
  position:fixed;
  top:0;
  left:-420px;
  width:420px;
  height:100%;
  padding:18px;
  transition:.35s ease;
  z-index:9000;
}
#diaryPanel.open{
  left:0;
}

input,textarea{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ccc;
}

button{
  margin-top:14px;
  padding:12px;
  width:100%;
  border:none;
  border-radius:12px;
  background:var(--accent);
  color:white;
  cursor:pointer;
}
.back-btn{
  background:#cbd5e1;
  color:#000;
}
</style>
</head>

<body>

<header>
  <h1>Hodded Habits</h1>
</header>

<main>
  <div id="app"></div>
</main>

<!-- CONTEXT MENU -->
<div id="contextMenu">
  <div class="context-item" onclick="openReminder()">ðŸ”” Reminder</div>
  <div class="context-item" onclick="openDiary()">ðŸ“” Diary</div>
</div>

<!-- REMINDER MODAL -->
<div id="reminderModal">
  <div class="modal">
    <h3>Add Reminder ðŸ””</h3>
    <input id="reminderTitle" placeholder="Reminder title">
    <textarea id="reminderNote" placeholder="Notes (optional)"></textarea>
    <button onclick="saveReminder()">Save</button>
    <button class="back-btn" onclick="closeReminder()">Back</button>
  </div>
</div>

<!-- DIARY PANEL -->
<div id="diaryPanel">
  <h3>Diary Entry ðŸ“”</h3>
  <input id="diaryTitle" placeholder="Diary title">
  <textarea id="diaryText" placeholder="Write here..."></textarea>
  <button onclick="saveDiary()">Save Entry</button>
  <button class="back-btn" onclick="closeDiary()">Back</button>
</div>

<script>
/* STATE */
let state = JSON.parse(localStorage.getItem("hh")) || {
  reminders:{},
  diary:{}
};
let currentKey=null;

/* SAVE */
function saveState(){
  localStorage.setItem("hh",JSON.stringify(state));
}

/* RANDOM COLOR */
function rand(){
  return ["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#14b8a6"]
    [Math.floor(Math.random()*7)];
}

/* CALENDAR */
const app=document.getElementById("app");
const years=[2026,2027,2028];
const months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showYears(){
  app.innerHTML=`<div class="grid years">
    ${years.map(y=>`<div class="card" style="background:${rand()}" onclick="showMonths(${y})">${y}</div>`).join("")}
  </div>`;
}
function showMonths(y){
  app.innerHTML=`<div class="grid months">
    ${months.map((m,i)=>`<div class="card" style="background:${rand()}" onclick="showDays(${y},${i})">${m}</div>`).join("")}
  </div>`;
}
function showDays(y,m){
  const d=new Date(y,m+1,0).getDate();
  app.innerHTML=`<div class="grid days">
    ${Array.from({length:d},(_,i)=>`
      <div class="day" style="background:${rand()}"
        oncontextmenu="openMenu(event,'${y}-${m}-${i+1}')">${i+1}</div>`).join("")}
  </div>`;
}

/* CONTEXT MENU */
function openMenu(e,key){
  e.preventDefault();
  currentKey=key;
  contextMenu.style.display="block";
  contextMenu.style.left=e.pageX+"px";
  contextMenu.style.top=e.pageY+"px";
}
document.addEventListener("click",()=>contextMenu.style.display="none");

/* REMINDER */
function openReminder(){
  const r=state.reminders[currentKey]||{};
  reminderTitle.value=r.title||"";
  reminderNote.value=r.note||"";
  reminderModal.style.display="flex";
}
function closeReminder(){
  reminderModal.style.display="none";
}
function saveReminder(){
  state.reminders[currentKey]={
    title:reminderTitle.value,
    note:reminderNote.value
  };
  saveState();
  closeReminder();
}

/* DIARY */
function openDiary(){
  const d=state.diary[currentKey]||{};
  diaryTitle.value=d.title||"";
  diaryText.value=d.text||"";
  diaryPanel.style.background=`linear-gradient(135deg,${rand()},${rand()})`;
  diaryPanel.classList.add("open");
}
function closeDiary(){
  diaryPanel.classList.remove("open");
}
function saveDiary(){
  state.diary[currentKey]={
    title:diaryTitle.value,
    text:diaryText.value
  };
  saveState();
  closeDiary();
}

/* START */
showYears();
</script>

</body>
</html>
